<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Prediksi Kelulusan Mahasiswa</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="/static/css/style.css">
</head>

<body>

<div class="app-container">

<!-- ================= SIDEBAR ================= -->
<div class="sidebar">
    <h5 class="mb-3">ğŸ“ Input Data Mahasiswa</h5>

    <form action="/predict" method="post" id="predictForm">

        <div class="mb-2">
            <label>IPK</label>
            <input type="number" step="0.01" min="0" max="4" name="ipk" class="form-control" required>
        </div>

        <div class="mb-2">
            <label>Mata Kuliah Tidak Lulus</label>
            <input type="number" name="mk_tidak_lulus" class="form-control" required>
        </div>

        <div class="mb-2">
            <label>Jumlah Cuti</label>
            <input type="number" name="cuti" class="form-control" required>
        </div>

        <div class="mb-2">
            <label>Pekerjaan</label>
            <select name="pekerjaan" class="form-select" required>
                <option value="">Pilih</option>
                <option>Ya</option>
                <option>Tidak</option>
            </select>
        </div>

        <div class="mb-2">
            <label>Jumlah Semester</label>
            <input type="number" name="semester" class="form-control" required>
        </div>

        <div class="mb-2">
            <label>IPS Rata-rata</label>
            <input type="number" step="0.01" name="ips_rata" class="form-control" required>
        </div>

        <div class="mb-2">
            <label>IPS Akhir</label>
            <input type="number" step="0.01" name="ips_akhir" class="form-control" required>
        </div>

        <div class="mb-3">
            <label>IPS Tren</label>
            <input type="number" step="0.01" name="ips_tren" class="form-control" required>
        </div>

        <div class="mb-3">
            <label>Kehadiran</label>
            <select name="kehadiran" class="form-select" required>
                <option value="">Pilih</option>
                <option>Tinggi</option>
                <option>Sedang</option>
                <option>Rendah</option>
            </select>
        </div>

        <button class="btn btn-predict w-100">ğŸ” Prediksi</button>
    </form>
</div>

<!-- ================= MAIN CONTENT ================= -->
<div class="main-content">

<!-- HERO -->
<div class="hero">
    <h1>ğŸ“ Prediksi Kelulusan Mahasiswa</h1>
    <p>Sistem <strong>Machine Learning</strong> untuk membantu prediksi kelulusan.</p>
</div>

{% if hasil %}
<!-- ================= RESULT ================= -->
<div class="result-card mt-4">

    <!-- HASIL UTAMA -->
    <div class="prediction-main {% if hasil == 'Lulus Tepat Waktu' %}lulus{% else %}fail{% endif %}">
        <h4 class="mb-2">ğŸ¯ Prediction Result</h4>
        <h2 class="fw-bold">{{ hasil }}</h2>
    </div>

    <!-- INPUT SUMMARY -->
    <div class="input-summary mt-4">
        <h6 class="mb-3">ğŸ“‹ Data Mahasiswa</h6>

        <div class="row g-3 small">
            <div class="col-md-6"><strong>IPK:</strong> {{ ipk }}</div>
            <div class="col-md-6"><strong>MK Tidak Lulus:</strong> {{ mk_tidak_lulus }}</div>

            <div class="col-md-6"><strong>Jumlah Cuti:</strong> {{ cuti }}</div>
            <div class="col-md-6"><strong>Pekerjaan:</strong> {{ pekerjaan }}</div>

            <div class="col-md-6"><strong>Jumlah Semester:</strong> {{ semester }}</div>
            <div class="col-md-6"><strong>Kehadiran:</strong> {{ kehadiran }}</div>

            <div class="col-md-6"><strong>IPS Rata-rata:</strong> {{ ips_rata }}</div>
            <div class="col-md-6"><strong>IPS Akhir:</strong> {{ ips_akhir }}</div>

            <div class="col-md-12"><strong>IPS Tren:</strong> {{ ips_tren }}</div>
        </div>
    </div>

    <!-- PROBABILITY -->
    <div class="progress-box mt-4">
        <div class="progress-label">âœ… Lulus Tepat Waktu ({{ prob_lulus }}%)</div>
        <div class="progress">
            <div class="progress-bar bar-lulus" data-value="{{ prob_lulus }}"></div>
        </div>

        <div class="progress-label mt-3">âŒ Tidak Lulus Tepat Waktu ({{ prob_tidak }}%)</div>
        <div class="progress">
            <div class="progress-bar bar-tidak" data-value="{{ prob_tidak }}"></div>
        </div>
    </div>

</div>
{% endif %}

<!-- ================= TAB ================= -->
<div class="info-tabs mt-4">
    <button class="info-tab active" onclick="showTab('about', event)">ğŸ“Œ Tentang</button>
    <button class="info-tab" onclick="showTab('team', event)">ğŸ‘¥ Tim</button>
</div>

<div class="tab-wrapper">
    <div id="about" class="tab-content active">
        <div class="about-card">
            <h5>ğŸ“Œ Tentang Aplikasi</h5>
            <p>
Aplikasi ini merupakan <strong>sistem prediksi kelulusan mahasiswa</strong> yang dibangun menggunakan pendekatan 
<strong>Machine Learning</strong> dengan metode <strong>Random Forest Classifier</strong>.
</p>

<p>
Metode <strong>Random Forest</strong> adalah teknik <em>ensemble learning</em> yang terdiri dari 
banyak <strong>Decision Tree (pohon keputusan)</strong>.  
Setiap Decision Tree bekerja secara independen dalam menganalisis data mahasiswa berdasarkan 
berbagai faktor akademik dan non-akademik, seperti:
</p>

<ul>
    <li>IPK dan IPS</li>
    <li>Tingkat kehadiran</li>
    <li>Status cuti</li>
    <li>Status pekerjaan</li>
</ul>

<p>
Hasil prediksi akhir ditentukan melalui <strong>mekanisme voting mayoritas</strong> dari seluruh 
Decision Tree dalam model. Pendekatan ini membuat sistem menjadi 
<strong>lebih stabil, lebih akurat, dan tidak mudah mengalami overfitting</strong> 
dibandingkan dengan penggunaan satu Decision Tree saja.
</p>

<p>
Selain menampilkan hasil prediksi <strong>(Lulus / Tidak Lulus)</strong>, aplikasi ini juga 
menyajikan <strong>tingkat probabilitas (%)</strong>, sehingga pengguna dapat memahami 
tingkat keyakinan model terhadap hasil yang diberikan.
</p>

<p>
Dengan menggunakan metode <strong>Random Forest</strong>, aplikasi ini mampu:
</p>

<ul>
    <li>Mengolah data dengan karakteristik yang beragam</li>
    <li>Menghasilkan prediksi yang lebih konsisten</li>
    <li>Mendukung pengambilan keputusan akademik berbasis data</li>
</ul>

        </div>
    </div>

    <div id="team" class="tab-content">
        <div class="team-card">
            <h5>ğŸ‘¥ Anggota Team</h5>
            <div class="team-member"><img src="/static/img/anggota1.jpeg">Muhamad Nurul Awalin</div>
            <div class="team-member"><img src="/static/img/anggota2.jpg">Alam Nurdin Fadillah</div>
            <div class="team-member"><img src="/static/img/anggota3.jpg">Abdul Ropi</div>
            <div class="team-member"><img src="/static/img/anggota4.jpg">Dasun Darmawan</div>
            <div class="team-member"><img src="/static/img/anggota5.jpg">Imanuel Habalado</div>
        </div>
    </div>
</div>

</div>
</div>

<!-- ================= LOADING ================= -->
<div id="loadingOverlay" class="loading-overlay d-none">
    <div class="loading-box">
        <div class="spinner"></div>
        <p>ğŸ§  Menganalisis data...</p>
    </div>
</div>

<!-- ================= SCRIPT ================= -->
<script>
function showTab(tabId, event) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.info-tab').forEach(b => b.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    event.target.classList.add('active');
}

document.getElementById("predictForm").addEventListener("submit", () => {
    document.getElementById("loadingOverlay").classList.remove("d-none");
});

/* animasi progress bar (AMAN & RAPI) */
window.addEventListener("load", () => {
    document.querySelectorAll(".progress-bar").forEach(bar => {
        const val = bar.dataset.value || 0;
        bar.style.width = "0%";
        setTimeout(() => {
            bar.style.width = val + "%";
        }, 400);
    });
});
</script>

</body>
</html>
