<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Prediksi Kelulusan Mahasiswa</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
    background: linear-gradient(135deg, #f8fafc, #eef2ff);
    min-height: 100vh;
    color: #1e293b;
    font-family: "Segoe UI", sans-serif;
}

.card {
    background: #ffffff;
    border-radius: 16px;
    border: none;
    box-shadow: 0 10px 25px rgba(0,0,0,0.06);
}

.form-control,
.form-select {
    border-radius: 10px;
    border: 1px solid #cbd5f5;
}

.form-control:focus,
.form-select:focus {
    border-color: #6366f1;
    box-shadow: 0 0 0 0.15rem rgba(99,102,241,0.25);
}

label {
    font-weight: 600;
}

.result-box {
    background: #ffffff;
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.06);
    height: 100%;
}

.status-lulus {
    color: #16a34a;
    font-weight: 700;
}

.status-tidak {
    color: #dc2626;
    font-weight: 700;
}

.placeholder-box {
    color: #64748b;
    text-align: center;
    padding-top: 90px;
}

.btn-success {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border: none;
    border-radius: 12px;
    padding: 14px;
    font-weight: 600;
}

.section-title {
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #64748b;
    margin-bottom: 10px;
}

.ai-card {
    border: 1px solid #e5e7eb;
    border-radius: 14px;
    padding: 18px;
    margin-bottom: 18px;
    background: #f9fafb;
}

.ai-metric {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    font-size: 0.9rem;
}

.ai-metric span:first-child {
    color: #64748b;
}

.ai-metric span:last-child {
    font-weight: 600;
}

.prediction-main {
    text-align: center;
    padding: 20px;
    border-radius: 14px;
    background: linear-gradient(135deg, #f0fdf4, #dcfce7);
}

.prediction-main.fail {
    background: linear-gradient(135deg, #fef2f2, #fee2e2);
}

.confidence-note {
    font-size: 0.8rem;
    color: #64748b;
    text-align: center;
    margin-top: 8px;
}

</style>
</head>

<body>
<div class="container py-5">

<h3 class="text-center mb-4">üéì Prediksi Kelulusan Mahasiswa</h3>

<div class="row g-4">

<!-- FORM INPUT -->
<div class="col-lg-6">
<div class="card p-4 h-100">
<h5 class="mb-3">üìù Input Data Mahasiswa</h5>

<form action="/predict" method="post">
<div class="row g-3">

<div class="col-md-6">
<label>IPK</label>
<input
    type="number"
    name="ipk"
    class="form-control"
    step="0.01"
    min="0"
    max="4"
    placeholder="0.00 ‚Äì 4.00"
    required
    oninput="if (this.value > 4) this.value = 4;"
>
</div>


<div class="col-md-6">
<label>MK Tidak Lulus</label>
<input type="number" name="mk_tidak_lulus" class="form-control" required>
</div>

<div class="col-md-6">
<label>Jumlah Cuti</label>
<input type="number" name="cuti" class="form-control" required>
</div>

<div class="col-md-6">
<label>Pekerjaan</label>
<select name="pekerjaan" class="form-select" required>
<option value="">Pilih</option>
<option value="Ya">Ya</option>
<option value="Tidak">Tidak</option>
</select>
</div>

<div class="col-md-6">
<label>Jumlah Semester</label>
<input type="number" name="semester" class="form-control" required>
</div>

<div class="col-md-6">
<label>IPS Rata-rata</label>
<input type="number" step="0.01" name="ips_rata" class="form-control" required>
</div>

<div class="col-md-6">
<label>IPS Akhir</label>
<input type="number" step="0.01" name="ips_akhir" class="form-control" required>
</div>

<div class="col-md-6">
<label>IPS Tren</label>
<input type="number" step="0.01" name="ips_tren" class="form-control" required>
</div>

<div class="col-md-12">
<label>Kehadiran</label>
<select name="kehadiran" class="form-select" required>
<option value="">Pilih</option>
<option value="Tinggi">Tinggi</option>
<option value="Sedang">Sedang</option>
<option value="Rendah">Rendah</option>
</select>
</div>

</div>

<div class="d-grid mt-4">
<button class="btn btn-success btn-lg">üîç Prediksi</button>
</div>
</form>
</div>
</div>

<!-- HASIL -->
<div class="col-lg-6">
<div class="result-box">

{% if hasil %}

<div class="section-title">Prediction Result</div>

<!-- PREDIKSI UTAMA -->
<div class="prediction-main {{ 'fail' if hasil != 'Lulus Tepat Waktu' }}">
    <h6 class="mb-2">Status Kelulusan</h6>
    <h2 class="{{ 'status-lulus' if hasil == 'Lulus Tepat Waktu' else 'status-tidak' }}">
        {{ hasil }}
    </h2>
    <div class="confidence-note">
        Hasil prediksi berdasarkan model Machine Learning
    </div>
</div>

<!-- INPUT SNAPSHOT -->
<div class="section-title mt-4">Input Summary</div>
<div class="ai-card">

    <div class="ai-metric">
        <span>IPK</span><span>{{ ipk }}</span>
    </div>
    <div class="ai-metric">
        <span>MK Tidak Lulus</span><span>{{ mk_tidak_lulus }}</span>
    </div>
    <div class="ai-metric">
        <span>Jumlah Cuti</span><span>{{ cuti }}</span>
    </div>
    <div class="ai-metric">
        <span>Pekerjaan</span><span>{{ pekerjaan }}</span>
    </div>
    <div class="ai-metric">
        <span>Jumlah Semester</span><span>{{ semester }}</span>
    </div>
    <div class="ai-metric">
        <span>IPS Rata-rata</span><span>{{ ips_rata }}</span>
    </div>
    <div class="ai-metric">
        <span>IPS Akhir</span><span>{{ ips_akhir }}</span>
    </div>
    <div class="ai-metric">
        <span>IPS Tren</span><span>{{ ips_tren }}</span>
    </div>
    <div class="ai-metric">
        <span>Kehadiran</span><span>{{ kehadiran }}</span>
    </div>

</div>

<!-- PROBABILITAS -->
<div class="section-title">Prediction Confidence</div>

<div class="mb-3">
    <small>Lulus Tepat Waktu</small>
    <div class="progress">
        <div class="progress-bar bg-success progress-bar-striped progress-bar-animated"
             data-value="{{ prob_lulus }}">
            {{ prob_lulus }}%
        </div>
    </div>
</div>

<div class="mb-2">
    <small>Tidak Lulus Tepat Waktu</small>
    <div class="progress">
        <div class="progress-bar bg-danger progress-bar-striped progress-bar-animated"
             data-value="{{ prob_tidak }}">
            {{ prob_tidak }}%
        </div>
    </div>
</div>

<div class="confidence-note">
    Probabilitas menunjukkan tingkat keyakinan model terhadap hasil prediksi
</div>

{% else %}
<div class="placeholder-box">
    <h6>üìå Hasil akan tampil di sini</h6>
    <p>Silakan isi data dan jalankan prediksi</p>
</div>
{% endif %}

</div>
</div>

</div>
</div>

<script>
document.querySelectorAll('.progress-bar').forEach(bar => {
    const val = bar.getAttribute('data-value');
    bar.style.width = val + '%';
});
</script>

</body>
</html>
